@echo off
set SPRINTDIR=%~dp0
set SRCDIR=./src/
set BINDIR=./bin/
set TESTCASPERDIR=./OPTIweb/tests/

set MAKETEST=0
set RUNTEST=1


@echo ///////////////////////////////////////////////////////
@echo // COMPILATION de l'application web
@echo ///////////////////////////////////////////////////////
"%JAVA_HOME%\bin\javac" -cp tools/junit.jar -d %BINDIR% @files.txt

@echo ///////////////////////////////////////////////////////
@echo // EXECUTION des tests
@echo ///////////////////////////////////////////////////////
if "%RUNTEST%"=="1" (
"%JAVA_HOME%\bin\java" -cp %BINDIR%;tools/junit.jar MakeOPTIwebTest
)

@echo ///////////////////////////////////////////////////////
@echo // EXECUTION de l'application
@echo ///////////////////////////////////////////////////////
"%JAVA_HOME%\bin\java" -cp %BINDIR% MakeOPTIweb

@echo ///////////////////////////////////////////////////////
@echo // EXECUTION du test casperAccueil
@echo ///////////////////////////////////////////////////////
cd %TESTCASPERDIR%
call casperjs.bat test casperAccueil.js
pause

@echo ///////////////////////////////////////////////////////
@echo // EXECUTION du test casperCredits
@echo ///////////////////////////////////////////////////////
call casperjs.bat test casperCredits.js
pause

@echo ///////////////////////////////////////////////////////
@echo // EXECUTION du test casperEtudiants
@echo ///////////////////////////////////////////////////////
call casperjs.bat test casperEtudiants.js
pause

@echo ///////////////////////////////////////////////////////
@echo // EXECUTION du test casperIntervenants
@echo ///////////////////////////////////////////////////////
call casperjs.bat test casperIntervenants.js
pause

@echo ///////////////////////////////////////////////////////
@echo // EXECUTION du test casperProjets
@echo ///////////////////////////////////////////////////////
call casperjs.bat test casperProjets.js
pause

@echo ///////////////////////////////////////////////////////
@echo // EXECUTION du test casperSujets
@echo ///////////////////////////////////////////////////////
call casperjs.bat test casperSujets.js
pause

